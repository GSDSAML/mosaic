"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[444],{89:function(e,t,a){a.d(t,{Z:function(){return NewPost}});var n=a(2253),s=a(4932),i=a(1309),c=a(5893),o=a(7294),l=a(1664),r=a.n(l),d=a(7904),m=a(8878);function NewPost(e){var t=e.style,a=e.attachments,l=e.preview,u=e.callback,h=(0,i._)((0,o.useState)("en"),2),f=h[0],p=h[1],x=(0,i._)((0,o.useState)({}),2),j=x[0],v=x[1],_=(0,i._)((0,o.useState)({user_id:null,content:"",access_control:1,attachments:""}),2),N=_[0],g=_[1],uploadPost=function(){var e="";a&&(e=(0,d.Nj)(a)),localStorage.getItem("backend_url");var t=(0,n._)({},N);t.user_id=j.uid,t.attachments=e,t.content&&t.user_id&&(0,m.rd)(t,function(e){e.message&&(g((0,s._)((0,n._)({},N),{user_id:j.uid,content:"",attachments:""})),u())},function(){alert("An error occurred while posting, please try again later!")})};return(0,o.useEffect)(function(){p((0,d.G3)()),v((0,d.PR)())},[]),(0,c.jsxs)("form",{onSubmit:function(e){e.preventDefault()},children:[(0,c.jsx)("div",{className:"author-thumb",children:j?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("img",{className:"author-item author-avatar",loading:"lazy",src:j.avatar?j.avatar:"img/dalle_avatar.png",width:"36",height:"36",alt:"author"}),"popup"==t?(0,c.jsx)("h3",{className:"author-item author-name",children:j.fullname}):(0,c.jsx)(c.Fragment,{})]}):(0,c.jsx)(c.Fragment,{})}),(0,c.jsx)("div",{className:"form-group with-icon label-floating is-empty",children:(0,c.jsx)("textarea",{className:"form-control",placeholder:(0,d.id)(f,"what's_on_your_mind?"),value:N.content,onChange:function(e){g((0,s._)((0,n._)({},N),{content:e.target.value}))}})}),(0,c.jsx)("div",{className:"post-attachment",children:l&&l.length?(0,c.jsxs)("div",{className:"post-video",children:[(0,c.jsxs)("div",{className:"video-thumb",children:[(0,c.jsx)("img",{loading:"lazy",src:"perf"==l[0].type?"img/dalle_thumbnail2.png":"img/article_thumbnail.png",alt:"photo",width:"100",height:"100"}),(0,c.jsx)(r(),{href:l[0].link,className:"play-video",children:(0,c.jsx)("svg",{className:"olymp-play-icon",children:(0,c.jsx)("use",{xlinkHref:"perf"==l[0].type?"#olymp-play-icon":"#olymp-blog-icon"})})})]}),(0,c.jsxs)("div",{className:"video-content",children:[(0,c.jsx)(r(),{className:"h4 title",href:l[0].link,children:l[0].title?l[0].title:"Click to see detail"}),(0,c.jsx)(r(),{className:"link-site",href:"/community",children:"MOSAIC"})]})]}):(0,c.jsx)(c.Fragment,{})}),t&&""!=t?(0,c.jsx)("button",{className:"btn btn-blue btn-lg full-width",onClick:uploadPost,children:(0,d.id)(f,"share")}):(0,c.jsx)("div",{className:"add-options-message",children:(0,c.jsx)("button",{className:"btn btn-primary btn-md-2",onClick:uploadPost,children:(0,d.id)(f,"post_status")})})]})}},9427:function(e,t,a){a.d(t,{Z:function(){return PostComment}});var n=a(1309),s=a(5893),i=a(7294),c=a(5121),o=a(7904);function PostComment(e){var t=e.user,a=e.pid,l=e.aid,r=e.type,d=e.onNewComment,m=(0,n._)((0,i.useState)(""),2),u=m[0],h=m[1];return(0,s.jsx)("form",{className:"comment-form inline-items",onSubmit:function(e){e.preventDefault()},children:(0,s.jsxs)("div",{className:"comment-form-container post__author author vcard inline-items",children:["performance"!=r?(0,s.jsx)(s.Fragment,{children:t&&t.avatar?(0,s.jsx)("img",{loading:"lazy",src:t.avatar,alt:"author",width:"36",height:"36"}):(0,s.jsx)("img",{loading:"lazy",src:"img/dalle_avatar.png",alt:"author",width:"36",height:"36"})}):(0,s.jsx)(s.Fragment,{}),(0,s.jsxs)("div",{className:"comment-form-item form-group is-empty",children:[(0,s.jsx)("textarea",{name:"comment",value:u,className:"comment-form-area form-control",placeholder:"Write a comment...",onChange:function(e){h(e.target.value)}}),(0,s.jsx)("span",{className:"material-input"})]}),(0,s.jsx)("button",{className:"comment-form-item btn btn-md-2 btn-primary",onClick:function(){var e=(0,o.LH)(),n="",s=null;r&&"performance"==r?(n=e+"/api/text_comment",s={annotation_id:l,content:u}):(n=e+"/api/comment_post",s={pid:a,user_id:t.uid,content:u});var i=(0,o.KU)();(0,c.Z)({method:"POST",url:n,data:s,headers:{Authorization:"Bearer ".concat(i)}}).then(function(e){h(""),d&&d(u)}).catch(function(e){console.log(e)})},children:"Post Comment"})]})})}},9308:function(e,t,a){a.d(t,{Z:function(){return PostPopup}});var n=a(1309),s=a(5893),i=a(5121),c=a(89),o=a(7904),l=a(7294);function PostPopup(e){var t=e.isShow,a=e.attachments,r=e.closePopup,d=e.onNewPost,m=(0,n._)((0,l.useState)("en"),2),u=m[0],h=m[1],f=(0,n._)((0,l.useState)({}),2),p=f[0],x=f[1],load_preview=function(){if(a&&a.length){var e=(0,o.LH)();(0,i.Z)({method:"POST",url:e+"/api/load_preview",data:{attachments:(0,o.Nj)(a)}}).then(function(e){x(e.data.attachments)}).catch(function(e){console.log(e)})}};return(0,l.useEffect)(function(){t&&(h((0,o.G3)()),load_preview())},[t]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"modal fade post-popup "+(t?"show":""),children:(0,s.jsx)("div",{className:"modal-dialog window-popup create-friend-group create-friend-group-add-friends",children:(0,s.jsxs)("div",{className:"modal-content",children:[(0,s.jsx)("a",{className:"close icon-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:r,children:(0,s.jsx)("svg",{className:"olymp-close-icon",children:(0,s.jsx)("use",{xlinkHref:"#olymp-close-icon"})})}),(0,s.jsx)("div",{className:"modal-header",children:(0,s.jsx)("h6",{className:"title",children:(0,o.id)(u,"write_post")})}),(0,s.jsx)("div",{className:"modal-body",children:(0,s.jsx)(c.Z,{style:"popup",attachments:a,preview:p,callback:function(){r(),d()}})})]})})}),(0,s.jsx)("div",{className:"modal-backdrop fade "+(t?"show":"")})]})}},8345:function(e,t,a){a.d(t,{Z:function(){return ListPostComment}});var n=a(1309),s=a(4586),i=a(5893),c=a(5121),o=a(7904),l=a(8878),r=a(7294);function ListPostComment(e){var t=e.pid,a=e.userId,d=e.type,m=e.needCommentRefresh,u=e.setNeedCommentRefresh,h=(0,n._)((0,r.useState)("en"),2),f=h[0],p=h[1],x=(0,n._)((0,r.useState)([]),2),j=x[0],v=x[1],_=(0,n._)((0,r.useState)({}),2),N=_[0],g=_[1],load_comments=function(){var e=(0,o.LH)(),n="",s=null;d&&"performance"==d?(n=e+"/api/list_text_comment",s={annotation_id:t,user_id:a}):(n=e+"/api/list_post_comment",s={pid:t}),(0,c.Z)({method:"POST",url:n,data:s}).then(function(e){var t=e.data;t.comments&&v(t.comments)}).catch(function(e){console.log(e)})},deleteComment=function(e){var t=e.cid;(0,l.$s)(t,d,function(){v(j.filter(function(e){return e.cid!==t}))})},react=function(e,t,a){var n=t.feedback;if(n&&n.feedback==a)(0,l.yz)(n.fid,function(t){if(t.message){var a=(0,s._)(j);a[e].feedback=null,v(a)}});else{var i={text_comment_id:t.cid,user_feedback_id:N.uid,feedback:a};(0,l.NC)(i,function(t){var n=t.fid;if(n){var i=(0,s._)(j);i[e].feedback={fid:n,feedback:a},v(i)}})}};return(0,r.useEffect)(function(){p((0,o.G3)()),g((0,o.PR)()),load_comments()},[]),(0,r.useEffect)(function(){m&&(load_comments(),u(!1))},[m]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("ul",{className:"comments-list",children:j.map(function(e,t){return(0,i.jsxs)("li",{className:"comment-item "+("performance"==d?"performance-comment-item":""),children:[(0,i.jsxs)("div",{className:"post__author author vcard inline-items",children:[d&&"performance"==d?(0,i.jsx)(i.Fragment,{}):(0,i.jsx)("img",{loading:"lazy",src:e.avatar,width:"36",height:"36",alt:"author"}),(0,i.jsxs)("div",{className:"author-date",children:[(0,i.jsx)("a",{className:"h6 post__author-name fn",href:"/profile?uid="+e.user_id,children:e.fullname}),(0,i.jsx)("div",{className:"post__date",children:(0,i.jsx)("time",{className:"published",dateTime:e.updated_at,children:e.updated_at})})]}),(0,i.jsxs)("div",{className:"more",children:[(0,i.jsx)("svg",{className:"olymp-three-dots-icon",children:(0,i.jsx)("use",{xlinkHref:"#olymp-three-dots-icon"})}),N.uid==e.user_id?(0,i.jsx)("ul",{className:"more-dropdown",children:(0,i.jsx)("li",{children:(0,i.jsxs)("a",{onClick:function(){return deleteComment(e)},children:[(0,i.jsx)("i",{className:"fa fa-trash"}),"\xa0",(0,o.id)(f,"delete_comment")]})})}):(0,i.jsx)(i.Fragment,{})]})]}),(0,i.jsx)("p",{children:e.content}),"performance"==d&&"student"==N.user_type&&(0,i.jsx)("div",{className:"reaction-info post-additional-info inline-items",children:(0,i.jsxs)("div",{className:"reaction-button-area",children:[(0,i.jsx)("button",{className:"reaction-button inline-items "+(e.feedback&&1==e.feedback.feedback?"reaction-active":""),onClick:function(){return react(t,e,1)},children:(0,i.jsx)("i",{className:"far fa-thumbs-up"})}),(0,i.jsx)("button",{className:"reaction-button inline-items "+(e.feedback&&0==e.feedback.feedback?"reaction-active":""),onClick:function(){return react(t,e,0)},children:(0,i.jsx)("i",{className:"far fa-thumbs-down"})})]})})]},e.cid)})}),(0,i.jsxs)("a",{className:"more-comments",onClick:function(){},children:[(0,o.id)(f,"view_more_comments")," ",(0,i.jsx)("span",{children:"+"})]})]})}},6823:function(e,t,a){a.d(t,{Z:function(){return ListPosts}});var n=a(2253),s=a(4932),i=a(1309),c=a(5893),o=a(7294),l=a(1664),r=a.n(l);function PostPreview(e){var t=e.attachments;return(0,c.jsx)(c.Fragment,{children:t&&t.length?(0,c.jsxs)("div",{className:"post-video",children:[(0,c.jsxs)("div",{className:"video-thumb",children:[(0,c.jsx)("img",{loading:"lazy",src:"perf"==t[0].type?"img/dalle_thumbnail2.png":"img/article_thumbnail.png",alt:"photo",width:"197",height:"194"}),(0,c.jsx)(r(),{href:t[0].link,className:"play-video",children:(0,c.jsx)("svg",{className:"olymp-play-icon",children:(0,c.jsx)("use",{xlinkHref:"perf"==t[0].type?"#olymp-play-icon":"#olymp-blog-icon"})})})]}),(0,c.jsxs)("div",{className:"video-content",children:[(0,c.jsx)(r(),{className:"h4 title",href:t[0].link,children:t[0].title?t[0].title:"Click to see detail"}),(0,c.jsx)(r(),{className:"link-site",href:"/community",children:"MOSAIC"})]})]}):(0,c.jsx)(c.Fragment,{})})}function CommentSummary(e){var t=e.isLike,a=e.onLike,n=e.onComment,s=e.onShare;return(0,c.jsxs)("div",{className:"post-additional-info inline-items",children:[(0,c.jsx)("a",{className:"post-add-icon inline-items "+(t?"active":""),onClick:a,children:(0,c.jsx)("svg",{className:"olymp-heart-icon",children:(0,c.jsx)("use",{xlinkHref:"#olymp-heart-icon"})})}),(0,c.jsxs)("div",{className:"comments-shared",children:[(0,c.jsx)("a",{className:"post-add-icon inline-items",onClick:n,children:(0,c.jsx)("svg",{className:"olymp-speech-balloon-icon",children:(0,c.jsx)("use",{xlinkHref:"#olymp-speech-balloon-icon"})})}),(0,c.jsx)("a",{className:"post-add-icon inline-items",onClick:s,children:(0,c.jsx)("svg",{className:"olymp-share-icon",children:(0,c.jsx)("use",{xlinkHref:"#olymp-share-icon"})})})]})]})}var d=a(9427),m=a(8345),u=a(7904),h=a(8878);function ListPosts(e){var t=e.userId,a=e.post_type,l=e.shareCallback,f=e.needPostRefresh,p=e.setNeedPostRefresh,x=(0,i._)((0,o.useState)("en"),2),j=x[0],v=x[1],_=(0,i._)((0,o.useState)([]),2),N=_[0],g=_[1],b=(0,i._)((0,o.useState)(-1),2),k=b[0],y=b[1],w=(0,i._)((0,o.useState)(-1),2),C=w[0],P=w[1],S=(0,i._)((0,o.useState)(null),2),F=S[0],R=S[1],Z=(0,i._)((0,o.useState)(!1),2),H=Z[0],z=Z[1],load_posts=function(e){var callback=function(e){g(e),e.length&&y(e[0].pid)};t?(0,h.Pu)(t,e,callback):(0,h.uF)(e,callback)},deletePost=function(e){(0,h.tF)(e,function(e){e.message&&p(!0)})},likeAction=function(e,t,a){e.is_like?(0,h.Pj)(t,a,function(){g(N.map(function(e){return e.pid===a?(0,s._)((0,n._)({},e),{is_like:!1}):e}))}):(0,h.mf)(t,a,function(){g(N.map(function(e){return e.pid===a?(0,s._)((0,n._)({},e),{is_like:!0}):e}))})},openComment=function(e){y(e)},sharePost=function(e){l([(0,u.qn)(e)])};return(0,o.useEffect)(function(){v((0,u.G3)());var e=(0,u.PR)();R(e),("user_post"==a&&t||"community"==a)&&load_posts(e.uid)},[t]),(0,o.useEffect)(function(){f&&(load_posts((0,u.PR)().uid),p(!1))},[f]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{id:"newsfeed-items-grid",children:N.map(function(e){return(0,c.jsxs)("div",{className:"ui-block",children:[(0,c.jsxs)("article",{className:"hentry post video",children:[(0,c.jsxs)("div",{className:"post__author author vcard inline-items",children:[e.avatar?(0,c.jsx)("img",{loading:"lazy",src:e.avatar,alt:"author",width:"42",height:"42"}):(0,c.jsx)("img",{loading:"lazy",src:"img/dalle_avatar.png",alt:"author",width:"42",height:"42"}),(0,c.jsxs)("div",{className:"author-date",children:[(0,c.jsx)(r(),{href:"/profile?uid="+e.user_id,className:"h6 post__author-name fn",children:e.fullname})," ",(0,u.id)(j,"share_a")," ",(0,c.jsx)("a",{children:(0,u.id)(j,"link")}),(0,c.jsx)("div",{className:"post__date",children:(0,c.jsx)("time",{className:"published",dateTime:e.updated_at,children:e.updated_at})})]}),(0,c.jsxs)("div",{className:"more",children:[(0,c.jsx)("svg",{className:"olymp-three-dots-icon",children:(0,c.jsx)("use",{xlinkHref:"#olymp-three-dots-icon"})}),F.uid==e.user_id?(0,c.jsx)("ul",{className:"more-dropdown",children:(0,c.jsx)("li",{children:(0,c.jsxs)("a",{onClick:function(){return deletePost(e.pid)},children:[(0,c.jsx)("i",{className:"fa fa-trash"}),"\xa0",(0,u.id)(j,"delete_post")]})})}):(0,c.jsx)(c.Fragment,{})]})]}),(0,c.jsx)("p",{children:e.content}),(0,c.jsx)(PostPreview,{attachments:e.attachments}),(0,c.jsx)(CommentSummary,{isLike:e.is_like,onLike:function(){likeAction(e,F.uid,e.pid)},onComment:function(){openComment(e.pid)},onShare:function(){sharePost(e.pid)}})]}),e.pid==C?(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(m.Z,{pid:e.pid,needCommentRefresh:H,setNeedCommentRefresh:z})}):(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("a",{className:"more-comments",onClick:function(){P(e.pid)},children:(0,u.id)(j,"view_comments")})}),e.pid==k?(0,c.jsx)(d.Z,{user:F,pid:e.pid,onNewComment:function(){z(!0)}}):(0,c.jsx)(c.Fragment,{})]},e.pid)})}),(0,c.jsx)("a",{id:"load-more-button",className:"btn btn-control btn-more","data-load-link":"items-to-load.html","data-container":"newsfeed-items-grid",children:(0,c.jsx)("svg",{className:"olymp-three-dots-icon",children:(0,c.jsx)("use",{xlinkHref:"#olymp-three-dots-icon"})})})]})}},816:function(e,t,a){a.d(t,{Z:function(){return PostPerformance}});var n=a(1309),s=a(5893),i=a(7294),c=a(89),o=a(7904);function PostPerformance(e){var t=e.onNewPost,a=(0,n._)((0,i.useState)("en"),2),l=a[0],r=a[1],d=(0,n._)((0,i.useState)("status"),2),m=d[0],u=d[1];return(0,i.useEffect)(function(){r((0,o.G3)())},[]),(0,s.jsx)("div",{className:"ui-block",children:(0,s.jsxs)("div",{className:"news-feed-form",children:[(0,s.jsx)("ul",{className:"nav nav-tabs",role:"tablist",children:(0,s.jsx)("li",{className:"nav-item",children:(0,s.jsxs)("a",{className:"nav-link inline-items "+("status"==m?"active":""),"data-bs-toggle":"tab",role:"tab",onClick:function(){u("status")},children:[(0,s.jsx)("svg",{className:"olymp-status-icon",children:(0,s.jsx)("use",{xlinkHref:"#olymp-status-icon"})}),(0,s.jsx)("span",{children:(0,o.id)(l,"status")})]})})}),(0,s.jsx)("div",{className:"tab-content",children:(0,s.jsx)("div",{className:"tab-pane fade "+("status"==m?"active show":""),id:"home-1",role:"tabpanel","aria-expanded":"true",children:(0,s.jsx)(c.Z,{callback:function(){alert("Post Success!"),t()}})})})]})})}},4766:function(e,t,a){a.d(t,{Z:function(){return RecentPerformance}});var n=a(1309),s=a(5893),i=a(7294),c=a(1163),o=a(7904),l=a(8878),r=a(1664),d=a.n(r);function RecentPerformance(e){var t=e.title,a=e.userId,r=e.shareCallback,m=(0,c.useRouter)(),u=(0,n._)((0,i.useState)("en"),2),h=u[0],f=u[1],p=(0,n._)((0,i.useState)([]),2),x=p[0],j=p[1],v=(0,n._)((0,i.useState)({}),2),_=v[0],N=v[1],share=function(e){r([(0,o.WY)(e.pid,_.uid)])},annotate=function(e){var t=e.pid,a=_.uid;m.push("/annotation?pid=".concat(t,"&aid=").concat(a))};return(0,i.useEffect)(function(){f((0,o.G3)()),N((0,o.PR)()),(0,l.EZ)(a,10,1,j)},[]),(0,s.jsxs)("div",{className:"ui-block",children:[(0,s.jsxs)("div",{className:"ui-block-title",children:[t?(0,s.jsx)("h6",{className:"title",children:t}):(0,s.jsx)(d(),{className:"h6",href:a?"/performances?uid="+a:"/performances?mode=all",children:a?(0,o.id)(h,"recent_performances"):(0,o.id)(h,"all_recent_performances")}),(0,s.jsx)("a",{className:"more",children:(0,s.jsx)("svg",{className:"olymp-three-dots-icon",children:(0,s.jsx)("use",{xlinkHref:"#olymp-three-dots-icon"})})})]}),(0,s.jsxs)("ul",{className:"widget w-friend-pages-added notification-list friend-requests performance-list",children:[x.map(function(e,t){return(0,s.jsxs)("li",{className:"inline-items",children:[(!a||-1==a)&&(0,s.jsx)("div",{className:"author-thumb",children:(0,s.jsx)(d(),{href:"/profile?uid="+e.user_id,children:e.avatar?(0,s.jsx)("img",{loading:"lazy",src:e.avatar,alt:"photo",width:"36",height:"36"}):(0,s.jsx)("img",{loading:"lazy",src:"img/avatar1.webp",alt:"photo",width:"36",height:"36"})})}),(0,s.jsxs)("div",{className:"notification-event",children:[(0,s.jsx)("a",{className:"h6 notification-friend",onClick:function(){annotate(e)},children:e.name}),(0,s.jsx)("span",{className:"chat-message-item",children:e.updated_at})]}),(0,s.jsx)("span",{className:"notification-icon","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-original-title":"ADD TO YOUR FAVS",children:(0,s.jsx)("button",{className:"btn btn-outline-dark notification-action",onClick:function(){share(e)},children:(0,s.jsx)("i",{className:"fa fa-share"})})})]},e.pid)}),0==x.length?(0,s.jsx)("li",{className:"inline-items",children:(0,o.id)(h,"no_information")}):(0,s.jsx)(s.Fragment,{})]})]})}}}]);