"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[444],{89:function(e,n,t){t.d(n,{Z:function(){return NewPost}});var s=t(2253),a=t(4932),i=t(1309),o=t(5893),c=t(7294),l=t(1664),r=t.n(l),d=t(7904),m=t(8878);function NewPost(e){var n=e.style,t=e.attachments,l=e.preview,u=e.callback,h=(0,i._)((0,c.useState)("en"),2),f=h[0],p=h[1],x=(0,i._)((0,c.useState)({}),2),j=x[0],v=x[1],N=(0,i._)((0,c.useState)({user_id:null,content:"",access_control:1,attachments:""}),2),_=N[0],g=N[1],uploadPost=function(){var e="";t&&(e=(0,d.Nj)(t)),localStorage.getItem("backend_url");var n=(0,s._)({},_);n.user_id=j.uid,n.attachments=e,n.content&&n.user_id&&(0,m.rd)(n,function(e){e.message&&(g((0,a._)((0,s._)({},_),{user_id:j.uid,content:"",attachments:""})),u())},function(){alert("An error occurred while posting, please try again later!")})};return(0,c.useEffect)(function(){p((0,d.G3)()),v((0,d.PR)())},[]),(0,o.jsxs)("form",{onSubmit:function(e){e.preventDefault()},children:[(0,o.jsx)("div",{className:"author-thumb",children:j?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("img",{className:"author-item author-avatar",loading:"lazy",src:j.avatar?j.avatar:"img/dalle_avatar.png",width:"36",height:"36",alt:"author"}),"popup"==n?(0,o.jsx)("h3",{className:"author-item author-name",children:j.fullname}):(0,o.jsx)(o.Fragment,{})]}):(0,o.jsx)(o.Fragment,{})}),(0,o.jsx)("div",{className:"form-group with-icon label-floating is-empty",children:(0,o.jsx)("textarea",{className:"form-control",placeholder:(0,d.id)(f,"what's_on_your_mind?"),value:_.content,onChange:function(e){g((0,a._)((0,s._)({},_),{content:e.target.value}))}})}),(0,o.jsx)("div",{className:"post-attachment",children:l&&l.length?(0,o.jsxs)("div",{className:"post-video",children:[(0,o.jsxs)("div",{className:"video-thumb",children:[(0,o.jsx)("img",{loading:"lazy",src:"perf"==l[0].type?"img/dalle_thumbnail2.png":"img/article_thumbnail.png",alt:"photo",width:"100",height:"100"}),(0,o.jsx)(r(),{href:l[0].link,className:"play-video",children:(0,o.jsx)("svg",{className:"olymp-play-icon",children:(0,o.jsx)("use",{xlinkHref:"perf"==l[0].type?"#olymp-play-icon":"#olymp-blog-icon"})})})]}),(0,o.jsxs)("div",{className:"video-content",children:[(0,o.jsx)(r(),{className:"h4 title",href:l[0].link,children:l[0].title?l[0].title:"Click to see detail"}),(0,o.jsx)(r(),{className:"link-site",href:"/community",children:"MOSAIC"})]})]}):(0,o.jsx)(o.Fragment,{})}),n&&""!=n?(0,o.jsx)("button",{className:"btn btn-blue btn-lg full-width",onClick:uploadPost,children:(0,d.id)(f,"share")}):(0,o.jsx)("div",{className:"add-options-message",children:(0,o.jsx)("button",{className:"btn btn-primary btn-md-2",onClick:uploadPost,children:(0,d.id)(f,"post_status")})})]})}},9427:function(e,n,t){t.d(n,{Z:function(){return PostComment}});var s=t(1309),a=t(5893),i=t(7294),o=t(7066),c=t(7904);function PostComment(e){var n=e.user,t=e.pid,l=e.aid,r=e.type,d=e.onNewComment,m=(0,s._)((0,i.useState)(""),2),u=m[0],h=m[1];return(0,a.jsx)("form",{className:"comment-form inline-items",onSubmit:function(e){e.preventDefault()},children:(0,a.jsxs)("div",{className:"comment-form-container post__author author vcard inline-items",children:["performance"!=r?(0,a.jsx)(a.Fragment,{children:n&&n.avatar?(0,a.jsx)("img",{loading:"lazy",src:n.avatar,alt:"author",width:"36",height:"36"}):(0,a.jsx)("img",{loading:"lazy",src:"img/dalle_avatar.png",alt:"author",width:"36",height:"36"})}):(0,a.jsx)(a.Fragment,{}),(0,a.jsxs)("div",{className:"comment-form-item form-group is-empty",children:[(0,a.jsx)("textarea",{name:"comment",value:u,className:"comment-form-area form-control",placeholder:"Write a comment...",onChange:function(e){h(e.target.value)}}),(0,a.jsx)("span",{className:"material-input"})]}),(0,a.jsx)("button",{className:"comment-form-item btn btn-md-2 btn-primary",onClick:function(){var e=(0,c.LH)(),s="",a=null;r&&"performance"==r?(s=e+"/api/text_comment",a={annotation_id:l,content:u}):(s=e+"/api/comment_post",a={pid:t,user_id:n.uid,content:u});var i=(0,c.KU)();(0,o.Z)({method:"POST",url:s,data:a,headers:{Authorization:"Bearer ".concat(i)}}).then(function(e){h(""),d&&d(u)}).catch(function(e){console.log(e)})},children:"Post Comment"})]})})}},9308:function(e,n,t){t.d(n,{Z:function(){return PostPopup}});var s=t(1309),a=t(5893),i=t(7066),o=t(89),c=t(7904),l=t(7294);function PostPopup(e){var n=e.isShow,t=e.attachments,r=e.closePopup,d=e.onNewPost,m=(0,s._)((0,l.useState)("en"),2),u=m[0],h=m[1],f=(0,s._)((0,l.useState)({}),2),p=f[0],x=f[1],load_preview=function(){if(t&&t.length){var e=(0,c.LH)();(0,i.Z)({method:"POST",url:e+"/api/load_preview",data:{attachments:(0,c.Nj)(t)}}).then(function(e){x(e.data.attachments)}).catch(function(e){console.log(e)})}};return(0,l.useEffect)(function(){n&&(h((0,c.G3)()),load_preview())},[n]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"modal fade post-popup "+(n?"show":""),children:(0,a.jsx)("div",{className:"modal-dialog window-popup create-friend-group create-friend-group-add-friends",children:(0,a.jsxs)("div",{className:"modal-content",children:[(0,a.jsx)("a",{className:"close icon-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:r,children:(0,a.jsx)("svg",{className:"olymp-close-icon",children:(0,a.jsx)("use",{xlinkHref:"#olymp-close-icon"})})}),(0,a.jsx)("div",{className:"modal-header",children:(0,a.jsx)("h6",{className:"title",children:(0,c.id)(u,"write_post")})}),(0,a.jsx)("div",{className:"modal-body",children:(0,a.jsx)(o.Z,{style:"popup",attachments:t,preview:p,callback:function(){r(),d()}})})]})})}),(0,a.jsx)("div",{className:"modal-backdrop fade "+(n?"show":"")})]})}},8345:function(e,n,t){t.d(n,{Z:function(){return ListPostComment}});var s=t(1309),a=t(4586),i=t(5893),o=t(7066),c=t(7904),l=t(8878),r=t(7294);function ListPostComment(e){var n=e.pid,t=e.userId,d=e.type,m=e.needCommentRefresh,u=e.setNeedCommentRefresh,h=(0,s._)((0,r.useState)("en"),2),f=h[0],p=h[1],x=(0,s._)((0,r.useState)([]),2),j=x[0],v=x[1],N=(0,s._)((0,r.useState)({}),2),_=N[0],g=N[1],load_comments=function(){var e=(0,c.LH)(),s="",a=null;d&&"performance"==d?(s=e+"/api/list_text_comment",a={annotation_id:n,user_id:t}):(s=e+"/api/list_post_comment",a={pid:n}),(0,o.Z)({method:"POST",url:s,data:a}).then(function(e){var n=e.data;n.comments&&v(n.comments)}).catch(function(e){console.log(e)})},deleteComment=function(e){var n=e.cid;(0,l.$s)(n,d,function(){v(j.filter(function(e){return e.cid!==n}))})},react=function(e,n,t){var s=n.feedback;if(s&&s.feedback==t)(0,l.yz)(s.fid,function(n){if(n.message){var t=(0,a._)(j);t[e].feedback=null,v(t)}});else{var i={text_comment_id:n.cid,user_feedback_id:_.uid,feedback:t};(0,l.NC)(i,function(n){var s=n.fid;if(s){var i=(0,a._)(j);i[e].feedback={fid:s,feedback:t},v(i)}})}};return(0,r.useEffect)(function(){p((0,c.G3)()),g((0,c.PR)()),load_comments()},[]),(0,r.useEffect)(function(){m&&(load_comments(),u(!1))},[m]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("ul",{className:"comments-list",children:j.map(function(e,n){return(0,i.jsxs)("li",{className:"comment-item "+("performance"==d?"performance-comment-item":""),children:[(0,i.jsxs)("div",{className:"post__author author vcard inline-items",children:[d&&"performance"==d?(0,i.jsx)(i.Fragment,{}):(0,i.jsx)("img",{loading:"lazy",src:e.avatar,width:"36",height:"36",alt:"author"}),(0,i.jsxs)("div",{className:"author-date",children:[(0,i.jsx)("a",{className:"h6 post__author-name fn",href:"/profile?uid="+e.user_id,children:e.fullname}),(0,i.jsx)("div",{className:"post__date",children:(0,i.jsx)("time",{className:"published",dateTime:e.updated_at,children:e.updated_at})})]}),(0,i.jsxs)("div",{className:"more",children:[(0,i.jsx)("svg",{className:"olymp-three-dots-icon",children:(0,i.jsx)("use",{xlinkHref:"#olymp-three-dots-icon"})}),_.uid==e.user_id?(0,i.jsx)("ul",{className:"more-dropdown",children:(0,i.jsx)("li",{children:(0,i.jsxs)("a",{onClick:function(){return deleteComment(e)},children:[(0,i.jsx)("i",{className:"fa fa-trash"}),"\xa0",(0,c.id)(f,"delete_comment")]})})}):(0,i.jsx)(i.Fragment,{})]})]}),(0,i.jsx)("p",{children:e.content}),"performance"==d&&"student"==_.user_type&&(0,i.jsx)("div",{className:"reaction-info post-additional-info inline-items",children:(0,i.jsxs)("div",{className:"reaction-button-area",children:[(0,i.jsx)("button",{className:"reaction-button inline-items "+(e.feedback&&1==e.feedback.feedback?"reaction-active":""),onClick:function(){return react(n,e,1)},children:(0,i.jsx)("i",{className:"far fa-thumbs-up"})}),(0,i.jsx)("button",{className:"reaction-button inline-items "+(e.feedback&&0==e.feedback.feedback?"reaction-active":""),onClick:function(){return react(n,e,0)},children:(0,i.jsx)("i",{className:"far fa-thumbs-down"})})]})})]},e.cid)})}),(0,i.jsxs)("a",{className:"more-comments",onClick:function(){},children:[(0,c.id)(f,"view_more_comments")," ",(0,i.jsx)("span",{children:"+"})]})]})}},6823:function(e,n,t){t.d(n,{Z:function(){return ListPosts}});var s=t(2253),a=t(4932),i=t(1309),o=t(5893),c=t(7294),l=t(1664),r=t.n(l);function PostPreview(e){var n=e.attachments;return(0,o.jsx)(o.Fragment,{children:n&&n.length?(0,o.jsxs)("div",{className:"post-video",children:[(0,o.jsxs)("div",{className:"video-thumb",children:[(0,o.jsx)("img",{loading:"lazy",src:"perf"==n[0].type?"img/dalle_thumbnail2.png":"img/article_thumbnail.png",alt:"photo",width:"197",height:"194"}),(0,o.jsx)(r(),{href:n[0].link,className:"play-video",children:(0,o.jsx)("svg",{className:"olymp-play-icon",children:(0,o.jsx)("use",{xlinkHref:"perf"==n[0].type?"#olymp-play-icon":"#olymp-blog-icon"})})})]}),(0,o.jsxs)("div",{className:"video-content",children:[(0,o.jsx)(r(),{className:"h4 title",href:n[0].link,children:n[0].title?n[0].title:"Click to see detail"}),(0,o.jsx)(r(),{className:"link-site",href:"/community",children:"MOSAIC"})]})]}):(0,o.jsx)(o.Fragment,{})})}function CommentSummary(e){var n=e.isLike,t=e.onLike,s=e.onComment,a=e.onShare;return(0,o.jsxs)("div",{className:"post-additional-info inline-items",children:[(0,o.jsx)("a",{className:"post-add-icon inline-items "+(n?"active":""),onClick:t,children:(0,o.jsx)("svg",{className:"olymp-heart-icon",children:(0,o.jsx)("use",{xlinkHref:"#olymp-heart-icon"})})}),(0,o.jsxs)("div",{className:"comments-shared",children:[(0,o.jsx)("a",{className:"post-add-icon inline-items",onClick:s,children:(0,o.jsx)("svg",{className:"olymp-speech-balloon-icon",children:(0,o.jsx)("use",{xlinkHref:"#olymp-speech-balloon-icon"})})}),(0,o.jsx)("a",{className:"post-add-icon inline-items",onClick:a,children:(0,o.jsx)("svg",{className:"olymp-share-icon",children:(0,o.jsx)("use",{xlinkHref:"#olymp-share-icon"})})})]})]})}var d=t(9427);function PostAction(e){var n=e.isLike,t=e.onLike,s=e.onComment,a=e.onShare;return(0,o.jsxs)("div",{className:"control-block-button post-control-button",children:[(0,o.jsxs)("a",{className:"btn btn-control "+(n?"active":""),onClick:t,children:[(0,o.jsx)("svg",{className:"olymp-like-post-icon",children:(0,o.jsx)("use",{xlinkHref:"#olymp-like-post-icon"})}),(0,o.jsx)("div",{className:"ripple-container"})]}),(0,o.jsx)("a",{className:"btn btn-control",onClick:s,children:(0,o.jsx)("svg",{className:"olymp-comments-post-icon",children:(0,o.jsx)("use",{xlinkHref:"#olymp-comments-post-icon"})})}),(0,o.jsx)("a",{className:"btn btn-control",onClick:a,children:(0,o.jsx)("svg",{className:"olymp-share-icon",children:(0,o.jsx)("use",{xlinkHref:"#olymp-share-icon"})})})]})}var m=t(8345),u=t(7904),h=t(8878);function ListPosts(e){var n=e.userId,t=e.post_type,l=e.shareCallback,f=e.needPostRefresh,p=e.setNeedPostRefresh,x=(0,i._)((0,c.useState)("en"),2),j=x[0],v=x[1],N=(0,i._)((0,c.useState)([]),2),_=N[0],g=N[1],b=(0,i._)((0,c.useState)(-1),2),k=b[0],y=b[1],C=(0,i._)((0,c.useState)(-1),2),P=C[0],w=C[1],S=(0,i._)((0,c.useState)(null),2),F=S[0],H=S[1],L=(0,i._)((0,c.useState)(!1),2),Z=L[0],R=L[1],load_posts=function(e){var callback=function(e){g(e),e.length&&y(e[0].pid)};n?(0,h.Pu)(n,e,callback):(0,h.uF)(e,callback)},deletePost=function(e){(0,h.tF)(e,function(e){e.message&&p(!0)})},likeAction=function(e,n,t){e.is_like?(0,h.Pj)(n,t,function(){g(_.map(function(e){return e.pid===t?(0,a._)((0,s._)({},e),{is_like:!1}):e}))}):(0,h.mf)(n,t,function(){g(_.map(function(e){return e.pid===t?(0,a._)((0,s._)({},e),{is_like:!0}):e}))})},openComment=function(e){y(e)},sharePost=function(e){l([(0,u.qn)(e)])};return(0,c.useEffect)(function(){v((0,u.G3)());var e=(0,u.PR)();H(e),("user_post"==t&&n||"community"==t)&&load_posts(e.uid)},[n]),(0,c.useEffect)(function(){f&&(load_posts((0,u.PR)().uid),p(!1))},[f]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{id:"newsfeed-items-grid",children:_.map(function(e){return(0,o.jsxs)("div",{className:"ui-block",children:[(0,o.jsxs)("article",{className:"hentry post video",children:[(0,o.jsxs)("div",{className:"post__author author vcard inline-items",children:[e.avatar?(0,o.jsx)("img",{loading:"lazy",src:e.avatar,alt:"author",width:"42",height:"42"}):(0,o.jsx)("img",{loading:"lazy",src:"img/dalle_avatar.png",alt:"author",width:"42",height:"42"}),(0,o.jsxs)("div",{className:"author-date",children:[(0,o.jsx)(r(),{href:"/profile?uid="+e.user_id,className:"h6 post__author-name fn",children:e.fullname})," ",(0,u.id)(j,"share_a")," ",(0,o.jsx)("a",{children:(0,u.id)(j,"link")}),(0,o.jsx)("div",{className:"post__date",children:(0,o.jsx)("time",{className:"published",dateTime:e.updated_at,children:e.updated_at})})]}),(0,o.jsxs)("div",{className:"more",children:[(0,o.jsx)("svg",{className:"olymp-three-dots-icon",children:(0,o.jsx)("use",{xlinkHref:"#olymp-three-dots-icon"})}),F.uid==e.user_id?(0,o.jsx)("ul",{className:"more-dropdown",children:(0,o.jsx)("li",{children:(0,o.jsxs)("a",{onClick:function(){return deletePost(e.pid)},children:[(0,o.jsx)("i",{className:"fa fa-trash"}),"\xa0",(0,u.id)(j,"delete_post")]})})}):(0,o.jsx)(o.Fragment,{})]})]}),(0,o.jsx)("p",{children:e.content}),(0,o.jsx)(PostPreview,{attachments:e.attachments}),(0,o.jsx)(PostAction,{isLike:e.is_like,onLike:function(){likeAction(e,F.uid,e.pid)},onComment:function(){openComment(e.pid)},onShare:function(){sharePost(e.pid)}}),(0,o.jsx)(CommentSummary,{isLike:e.is_like,onLike:function(){likeAction(e,F.uid,e.pid)},onComment:function(){openComment(e.pid)},onShare:function(){sharePost(e.pid)}})]}),e.pid==P?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(m.Z,{pid:e.pid,needCommentRefresh:Z,setNeedCommentRefresh:R})}):(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("a",{className:"more-comments",onClick:function(){w(e.pid)},children:(0,u.id)(j,"view_comments")})}),e.pid==k?(0,o.jsx)(d.Z,{user:F,pid:e.pid,onNewComment:function(){R(!0)}}):(0,o.jsx)(o.Fragment,{})]},e.pid)})}),(0,o.jsx)("a",{id:"load-more-button",className:"btn btn-control btn-more","data-load-link":"items-to-load.html","data-container":"newsfeed-items-grid",children:(0,o.jsx)("svg",{className:"olymp-three-dots-icon",children:(0,o.jsx)("use",{xlinkHref:"#olymp-three-dots-icon"})})})]})}},816:function(e,n,t){t.d(n,{Z:function(){return PostPerformance}});var s=t(1309),a=t(5893),i=t(7294),o=t(89),c=t(7904);function PostPerformance(e){var n=e.onNewPost,t=(0,s._)((0,i.useState)("en"),2),l=t[0],r=t[1],d=(0,s._)((0,i.useState)("status"),2),m=d[0],u=d[1];return(0,i.useEffect)(function(){r((0,c.G3)())},[]),(0,a.jsx)("div",{className:"ui-block",children:(0,a.jsxs)("div",{className:"news-feed-form",children:[(0,a.jsx)("ul",{className:"nav nav-tabs",role:"tablist",children:(0,a.jsx)("li",{className:"nav-item",children:(0,a.jsxs)("a",{className:"nav-link inline-items "+("status"==m?"active":""),"data-bs-toggle":"tab",role:"tab",onClick:function(){u("status")},children:[(0,a.jsx)("svg",{className:"olymp-status-icon",children:(0,a.jsx)("use",{xlinkHref:"#olymp-status-icon"})}),(0,a.jsx)("span",{children:(0,c.id)(l,"status")})]})})}),(0,a.jsx)("div",{className:"tab-content",children:(0,a.jsx)("div",{className:"tab-pane fade "+("status"==m?"active show":""),id:"home-1",role:"tabpanel","aria-expanded":"true",children:(0,a.jsx)(o.Z,{callback:function(){alert("Post Success!"),n()}})})})]})})}},4766:function(e,n,t){t.d(n,{Z:function(){return RecentPerformance}});var s=t(1309),a=t(5893),i=t(7294),o=t(1163),c=t(7904),l=t(8878),r=t(1664),d=t.n(r);function RecentPerformance(e){var n=e.title,t=e.userId,r=e.shareCallback,m=(0,o.useRouter)(),u=(0,s._)((0,i.useState)("en"),2),h=u[0],f=u[1],p=(0,s._)((0,i.useState)([]),2),x=p[0],j=p[1],share=function(e){r([(0,c.WY)(e.pid)])},annotate=function(e){var n=e.pid;m.push("/annotation?pid=".concat(n))};return(0,i.useEffect)(function(){f((0,c.G3)()),(0,l.EZ)(t,10,1,j)},[]),(0,a.jsxs)("div",{className:"ui-block",children:[(0,a.jsxs)("div",{className:"ui-block-title",children:[n?(0,a.jsx)("h6",{className:"title",children:n}):(0,a.jsx)(d(),{className:"h6",href:t?"/performances?uid="+t:"/performances?mode=all",children:t?(0,c.id)(h,"recent_performances"):(0,c.id)(h,"all_recent_performances")}),(0,a.jsx)("a",{className:"more",children:(0,a.jsx)("svg",{className:"olymp-three-dots-icon",children:(0,a.jsx)("use",{xlinkHref:"#olymp-three-dots-icon"})})})]}),(0,a.jsxs)("ul",{className:"widget w-friend-pages-added notification-list friend-requests performance-list",children:[x.map(function(e,n){return(0,a.jsxs)("li",{className:"inline-items",children:[(!t||-1==t)&&(0,a.jsx)("div",{className:"author-thumb",children:(0,a.jsx)(d(),{href:"/profile?uid="+e.user_id,children:e.avatar?(0,a.jsx)("img",{loading:"lazy",src:e.avatar,alt:"photo",width:"36",height:"36"}):(0,a.jsx)("img",{loading:"lazy",src:"img/avatar1.webp",alt:"photo",width:"36",height:"36"})})}),(0,a.jsxs)("div",{className:"notification-event",children:[(0,a.jsx)("a",{className:"h6 notification-friend",onClick:function(){annotate(e)},children:e.name}),(0,a.jsx)("span",{className:"chat-message-item",children:e.updated_at})]}),(0,a.jsx)("span",{className:"notification-icon","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-original-title":"ADD TO YOUR FAVS",children:(0,a.jsx)("button",{className:"btn btn-outline-dark notification-action",onClick:function(){share(e)},children:(0,a.jsx)("i",{className:"fa fa-share"})})})]},e.pid)}),0==x.length?(0,a.jsx)("li",{className:"inline-items",children:(0,c.id)(h,"no_information")}):(0,a.jsx)(a.Fragment,{})]})]})}}}]);