(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[881],{7032:function(e,s,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/my-class",function(){return l(6602)}])},6602:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return MyClass}});var a=l(1309),c=l(4586),i=l(5893),n=l(7294),t=l(1664),o=l.n(t),r=l(8878),d=l(7904),m=l(2253),u=l(4932),f=l(9755),h=l.n(f),p=l(7484),x=l.n(p),j=l(586),_=l(720),N=l(7389);function CreateClassPopup(e){var s=e.isShow,l=e.closePopup,c=e.user_id,t=e.classInfo,o=e.callback,f=(0,a._)((0,n.useState)("en"),2),p=f[0],g=f[1],v=(0,a._)((0,n.useState)({name:"",description:"",status:"1",start_time:"",end_time:""}),2),b=v[0],C=v[1],initDom=function(){h()(".form-control").on("focus",function(e){h()(h()(e.target).parent()).toggleClass("is-focused")}),h()(".form-control").on("blur",function(e){h()(h()(e.target).parent()).toggleClass("is-focused")})},changeDate=function(e,s){"fromDate"==s?C((0,u._)((0,m._)({},b),{start_time:e})):C((0,u._)((0,m._)({},b),{end_time:e}))};return(0,n.useEffect)(function(){g((0,d.G3)()),initDom()},[]),(0,n.useEffect)(function(){t&&C(function(e){return(0,u._)((0,m._)({},e),{name:t.name,description:t.description,status:t.status,start_time:t.start_time,end_time:t.end_time})})},[t]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"modal fade post-popup "+(s?"show":""),id:"create-friend-group-add-friends",role:"dialog","aria-labelledby":"create-friend-group-add-friends","aria-hidden":"true",children:(0,i.jsx)("div",{className:"modal-dialog window-popup create-friend-group create-friend-group-add-friends",role:"document",children:(0,i.jsxs)("div",{className:"modal-content",children:[(0,i.jsx)("a",{className:"close icon-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:l,children:(0,i.jsx)("svg",{className:"olymp-close-icon",children:(0,i.jsx)("use",{xlinkHref:"#olymp-close-icon"})})}),(0,i.jsx)("div",{className:"modal-header",children:null==t?(0,i.jsx)("h6",{className:"title",children:(0,d.id)(p,"create_a_new_class")}):(0,i.jsxs)("h6",{className:"title",children:[(0,d.id)(p,"update_class_infor")," - ",t.name]})}),(0,i.jsx)("div",{className:"modal-body",children:(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12",children:(0,i.jsxs)("div",{className:"form-group label-floating "+(b.name?"":"is-empty "),children:[(0,i.jsx)("label",{className:"control-label",children:"Name"}),(0,i.jsx)("input",{className:"form-control",type:"text",placeholder:"",value:b.name,onChange:function(e){C((0,u._)((0,m._)({},b),{name:e.target.value}))}}),(0,i.jsx)("span",{className:"material-input"})]})}),(0,i.jsx)("div",{className:"col col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12",children:(0,i.jsxs)("div",{className:"form-group label-floating "+(b.name?"":"is-empty "),children:[(0,i.jsx)("label",{className:"control-label",children:(0,d.id)(p,"description")}),(0,i.jsx)("textarea",{className:"full-width class-description",type:"text",placeholder:"",value:b.description,onChange:function(e){C((0,u._)((0,m._)({},b),{description:e.target.value}))}}),(0,i.jsx)("span",{className:"material-input"})]})}),(0,i.jsxs)("div",{className:"col col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12",children:[(0,i.jsx)("label",{className:"control-label",children:(0,d.id)(p,"status")}),(0,i.jsx)("fieldset",{className:"form-group",children:(0,i.jsxs)("select",{className:"form-select",value:b.status,onChange:function(e){C((0,u._)((0,m._)({},b),{status:e.target.value}))},children:[(0,i.jsx)("option",{value:"1",children:(0,d.id)(p,"open")}),(0,i.jsx)("option",{value:"0",children:(0,d.id)(p,"close")})]})})]}),(0,i.jsx)("div",{className:"col col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12",children:(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12",children:(0,i.jsxs)("div",{className:"form-group date-time-picker label-floating",children:[(0,i.jsx)("label",{className:"control-label",children:(0,d.id)(p,"start")}),(0,i.jsx)(_._,{dateAdapter:j.y,children:(0,i.jsx)(N.M,{value:x()(b.start_time),onChange:function(e){e&&changeDate(e.format("YYYY-MM-DD"),"fromDate")}})})]})}),(0,i.jsx)("div",{className:"col col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12",children:(0,i.jsxs)("div",{className:"form-group date-time-picker label-floating",children:[(0,i.jsx)("label",{className:"control-label",children:(0,d.id)(p,"end")}),(0,i.jsx)(_._,{dateAdapter:j.y,children:(0,i.jsx)(N.M,{value:x()(b.end_time),onChange:function(e){e&&changeDate(e.format("YYYY-MM-DD"),"toDate")}})})]})})]})}),(0,i.jsx)("div",{className:"col col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12",children:(0,i.jsx)("button",{className:"btn btn-primary full-width",onClick:function(){var e=(0,m._)({},b);t?(e.cid=t.cid,(0,r.a7)(e,o)):(e.created_user_id=c,(0,r.qH)(e,o))},children:t?"Update":(0,d.id)(p,"create")})})]})})]})})}),(0,i.jsx)("div",{className:"modal-backdrop fade "+(s?"show":"")})]})}var g=l(4827),v=l(6366),b=l(6895);function MyClass(){var e=(0,a._)((0,n.useState)({}),2),s=e[0],l=e[1],t=(0,a._)((0,n.useState)([]),2),m=t[0],u=t[1],f=(0,a._)((0,n.useState)(!1),2),h=f[0],p=f[1],x=(0,a._)((0,n.useState)(null),2),j=x[0],_=x[1],N=["#6495ED","#2E8B57","#8A2BE2","#4682B4","#32CD32","#008080","#DC143C","#9932CC","#1E90FF","#FF4500","#FF69B4","#6A5ACD","#FF8C00","#00CED1","#8B008B","#008B8B","#FFD700","#B22222","#4B0082","#FF6347"],closePopup=function(){p(!1),_(null)},searchClass=function(e){"teacher"==e.user_type?(0,r.yP)(e.uid,function(s){(0,r.cp)(e.uid,function(e){u((0,c._)(s).concat((0,c._)(e)))})}):(0,r.cp)(e.uid,u)},edit=function(e){p(!0),_(e)},remove=function(e){window.confirm("Are you sure to remove this class?")&&(0,r.ZB)(e.cid,function(s){s.message&&u(m.filter(function(s){return s.cid!=e.cid}))})};return(0,n.useEffect)(function(){var e=(0,d.PR)();l(e),searchClass(e)},[]),(0,i.jsxs)("div",{className:"my_class",children:[(0,i.jsx)(g.Z,{}),(0,i.jsx)("div",{className:"header-spacer"}),(0,i.jsx)("div",{className:"container min-height-600",children:(0,i.jsxs)("div",{className:"row",children:["teacher"==s.user_type&&(0,i.jsx)("div",{className:"col col-xl-3 col-lg-6 col-md-6 col-sm-6 col-12",children:(0,i.jsx)("div",{className:"friend-item friend-groups class-groups create-group h-75 mb-3",children:(0,i.jsx)("div",{className:"content",onClick:function(){p(!0)},children:(0,i.jsx)("a",{href:"#",className:"  btn btn-control bg-blue","data-bs-toggle":"modal","data-bs-target":"#create-friend-group-1",children:(0,i.jsx)("svg",{className:"olymp-plus-icon",children:(0,i.jsx)("use",{xlinkHref:"#olymp-plus-icon"})})})})})}),m.map(function(e,l){return(0,i.jsx)("div",{className:"col col-xl-3 col-lg-6 col-md-6 col-sm-6 col-12 mb-3",children:(0,i.jsx)("div",{className:"ui-block h-100 mb-0",children:(0,i.jsxs)("div",{className:"class-item",children:[e.created_user_id==s.uid&&(0,i.jsx)("button",{className:"btn btn-primary edit",onClick:function(){edit(e)},children:(0,i.jsx)("i",{className:"far fa-edit"})}),(0,i.jsx)("div",{className:"class-item-thumb",style:{backgroundColor:N[(0,d.xT)(0,N.length-1)]}}),(0,i.jsxs)("div",{className:"class-item-name flex",children:[(0,i.jsx)("div",{className:"item-flex",children:(0,i.jsx)(o(),{className:"h5",href:"teacher"==s.user_type?"/class?cid="+e.cid:"/student-class?cid="+e.cid,children:e.name})}),e.created_user_id==s.uid&&(0,i.jsx)("button",{className:"item-flex btn btn-outline-dark",onClick:function(){remove(e)},children:(0,i.jsx)("i",{className:"far fa-trash"})})]})]})})},e.cid)})]})}),"teacher"==s.user_type&&(0,i.jsx)(CreateClassPopup,{isShow:h,closePopup:closePopup,classInfo:j,user_id:s.uid,callback:function(e){e.message?(alert("Create successfully!"),(0,r.yP)(s.uid,u),closePopup()):alert("An error may occur, please try again later!")}}),(0,i.jsx)(v.Z,{menuId:"my-class"}),(0,i.jsx)(b.Z,{pageNum:2})]})}}},function(e){e.O(0,[571,424,875,389,980,774,888,179],function(){return e(e.s=7032)}),_N_E=e.O()}]);