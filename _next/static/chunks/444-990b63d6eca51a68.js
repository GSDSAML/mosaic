"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[444],{89:function(e,t,s){s.d(t,{Z:function(){return NewPost}});var a=s(2253),n=s(4932),i=s(1309),o=s(5893),l=s(7294),c=s(1664),r=s.n(c),d=s(7904),m=s(8878);function NewPost(e){var t=e.style,s=e.attachments,c=e.preview,u=e.callback,h=(0,i._)((0,l.useState)("en"),2),p=h[0],f=h[1],x=(0,i._)((0,l.useState)({}),2),j=x[0],v=x[1],g=(0,i._)((0,l.useState)({user_id:null,content:"",access_control:1,attachments:""}),2),_=g[0],N=g[1],uploadPost=function(){var e="";s&&(e=(0,d.Nj)(s)),localStorage.getItem("backend_url");var t=(0,a._)({},_);t.user_id=j.uid,t.attachments=e,t.content&&t.user_id&&(0,m.rd)(t,function(e){e.message&&(N((0,n._)((0,a._)({},_),{user_id:j.uid,content:"",attachments:""})),u())},function(){alert("An error occurred while posting, please try again later!")})};return(0,l.useEffect)(function(){f((0,d.G3)()),v((0,d.PR)())},[]),(0,o.jsxs)("form",{onSubmit:function(e){e.preventDefault()},children:[(0,o.jsx)("div",{className:"author-thumb",children:j?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("img",{className:"author-item author-avatar",loading:"lazy",src:j.avatar?j.avatar:"img/dalle_avatar.png",width:"36",height:"36",alt:"author"}),"popup"==t?(0,o.jsx)("h3",{className:"author-item author-name",children:j.fullname}):(0,o.jsx)(o.Fragment,{})]}):(0,o.jsx)(o.Fragment,{})}),(0,o.jsx)("div",{className:"form-group with-icon label-floating is-empty",children:(0,o.jsx)("textarea",{className:"form-control",placeholder:(0,d.id)(p,"what's_on_your_mind?"),value:_.content,onChange:function(e){N((0,n._)((0,a._)({},_),{content:e.target.value}))}})}),(0,o.jsx)("div",{className:"post-attachment",children:c&&c.length?(0,o.jsxs)("div",{className:"post-video",children:[(0,o.jsxs)("div",{className:"video-thumb",children:[(0,o.jsx)("img",{loading:"lazy",src:"perf"==c[0].type?"img/dalle_thumbnail2.png":"img/article_thumbnail.png",alt:"photo",width:"100",height:"100"}),(0,o.jsx)(r(),{href:c[0].link,className:"play-video",children:(0,o.jsx)("svg",{className:"olymp-play-icon",children:(0,o.jsx)("use",{xlinkHref:"perf"==c[0].type?"#olymp-play-icon":"#olymp-blog-icon"})})})]}),(0,o.jsxs)("div",{className:"video-content",children:[(0,o.jsx)(r(),{className:"h4 title",href:c[0].link,children:c[0].title?c[0].title:"Click to see detail"}),(0,o.jsx)(r(),{className:"link-site",href:"/community",children:"MOSAIC"})]})]}):(0,o.jsx)(o.Fragment,{})}),t&&""!=t?(0,o.jsx)("button",{className:"btn btn-blue btn-lg full-width",onClick:uploadPost,children:(0,d.id)(p,"share")}):(0,o.jsx)("div",{className:"add-options-message",children:(0,o.jsx)("button",{className:"btn btn-primary btn-md-2",onClick:uploadPost,children:(0,d.id)(p,"post_status")})})]})}},9427:function(e,t,s){s.d(t,{Z:function(){return PostComment}});var a=s(1309),n=s(5893),i=s(7294),o=s(5121),l=s(7904);function PostComment(e){var t=e.user,s=e.pid,c=e.aid,r=e.type,d=e.onNewComment,m=(0,a._)((0,i.useState)(""),2),u=m[0],h=m[1];return(0,n.jsx)("form",{className:"comment-form inline-items",onSubmit:function(e){e.preventDefault()},children:(0,n.jsxs)("div",{className:"comment-form-container post__author author vcard inline-items",children:["performance"!=r?(0,n.jsx)(n.Fragment,{children:t&&t.avatar?(0,n.jsx)("img",{loading:"lazy",src:t.avatar,alt:"author",width:"36",height:"36"}):(0,n.jsx)("img",{loading:"lazy",src:"img/dalle_avatar.png",alt:"author",width:"36",height:"36"})}):(0,n.jsx)(n.Fragment,{}),(0,n.jsxs)("div",{className:"comment-form-item form-group is-empty",children:[(0,n.jsx)("textarea",{name:"comment",value:u,className:"comment-form-area form-control",placeholder:"Write a comment...",onChange:function(e){h(e.target.value)}}),(0,n.jsx)("span",{className:"material-input"})]}),(0,n.jsx)("button",{className:"comment-form-item btn btn-md-2 btn-primary",onClick:function(){var e=(0,l.LH)(),a="",n=null;r&&"performance"==r?(a=e+"/api/text_comment",n={user_id:t.uid,annotation_id:c,content:u}):(a=e+"/api/comment_post",n={pid:s,user_id:t.uid,content:u});var i=(0,l.KU)();(0,o.Z)({method:"POST",url:a,data:n,headers:{Authorization:"Bearer ".concat(i)}}).then(function(e){h(""),d&&d(u)}).catch(function(e){console.log(e)})},children:"Post Comment"})]})})}},9308:function(e,t,s){s.d(t,{Z:function(){return PostPopup}});var a=s(1309),n=s(5893),i=s(5121),o=s(89),l=s(7904),c=s(7294);function PostPopup(e){var t=e.isShow,s=e.attachments,r=e.closePopup,d=e.onNewPost,m=(0,a._)((0,c.useState)("en"),2),u=m[0],h=m[1],p=(0,a._)((0,c.useState)({}),2),f=p[0],x=p[1],load_preview=function(){if(s&&s.length){var e=(0,l.LH)();(0,i.Z)({method:"POST",url:e+"/api/load_preview",data:{attachments:(0,l.Nj)(s)}}).then(function(e){x(e.data.attachments)}).catch(function(e){console.log(e)})}};return(0,c.useEffect)(function(){t&&(h((0,l.G3)()),load_preview())},[t]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"modal fade post-popup "+(t?"show":""),children:(0,n.jsx)("div",{className:"modal-dialog window-popup create-friend-group create-friend-group-add-friends",children:(0,n.jsxs)("div",{className:"modal-content",children:[(0,n.jsx)("a",{className:"close icon-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:r,children:(0,n.jsx)("svg",{className:"olymp-close-icon",children:(0,n.jsx)("use",{xlinkHref:"#olymp-close-icon"})})}),(0,n.jsx)("div",{className:"modal-header",children:(0,n.jsx)("h6",{className:"title",children:(0,l.id)(u,"write_post")})}),(0,n.jsx)("div",{className:"modal-body",children:(0,n.jsx)(o.Z,{style:"popup",attachments:s,preview:f,callback:function(){r(),d()}})})]})})}),(0,n.jsx)("div",{className:"modal-backdrop fade "+(t?"show":"")})]})}},8345:function(e,t,s){s.d(t,{Z:function(){return ListPostComment}});var a=s(1309);s(4586);var n=s(5893),i=s(5121),o=s(7904),l=s(8878),c=s(7294);function ListPostComment(e){var t=e.pid,s=e.userId,r=e.type,d=e.needCommentRefresh,m=e.setNeedCommentRefresh,u=(0,a._)((0,c.useState)("en"),2),h=u[0],p=u[1],f=(0,a._)((0,c.useState)([]),2),x=f[0],j=f[1],v=(0,a._)((0,c.useState)({}),2),g=(v[0],v[1]),load_comments=function(){var e=(0,o.LH)(),a="",n=null;r&&"performance"==r?(a=e+"/api/list_text_comment",n={annotation_id:t,user_id:s}):(a=e+"/api/list_post_comment",n={pid:t}),(0,i.Z)({method:"POST",url:a,data:n}).then(function(e){var t=e.data;t.comments&&j(t.comments)}).catch(function(e){console.log(e)})},deleteComment=function(e){var t=e.cid;(0,l.$s)(t,r,function(){j(x.filter(function(e){return e.cid!==t}))})};return(0,c.useEffect)(function(){p((0,o.G3)()),g((0,o.PR)()),load_comments()},[]),(0,c.useEffect)(function(){d&&(load_comments(),m(!1))},[d]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("ul",{className:"comments-list",children:x.map(function(e,t){return(0,n.jsxs)("li",{className:"comment-item "+("performance"==r?"performance-comment-item":""),children:[(0,n.jsxs)("div",{className:"post__author author vcard inline-items",children:[r&&"performance"==r?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)("img",{loading:"lazy",src:e.avatar,width:"36",height:"36",alt:"author"}),(0,n.jsxs)("div",{className:"author-date",children:[(0,n.jsx)("a",{className:"h6 post__author-name fn",href:"/profile?uid="+e.user_id,children:e.fullname}),(0,n.jsx)("div",{className:"post__date",children:(0,n.jsx)("time",{className:"published",dateTime:e.updated_at,children:e.updated_at})})]}),(0,n.jsxs)("div",{className:"more",children:[(0,n.jsx)("svg",{className:"olymp-three-dots-icon",children:(0,n.jsx)("use",{xlinkHref:"#olymp-three-dots-icon"})}),(0,n.jsx)("ul",{className:"more-dropdown",children:(0,n.jsx)("li",{children:(0,n.jsxs)("a",{onClick:function(){return deleteComment(e)},children:[(0,n.jsx)("i",{className:"fa fa-trash"}),"\xa0",(0,o.id)(h,"delete_comment")]})})})]})]}),(0,n.jsx)("p",{children:e.content})]},e.cid)})}),(0,n.jsxs)("a",{className:"more-comments",onClick:function(){},children:[(0,o.id)(h,"view_more_comments")," ",(0,n.jsx)("span",{children:"+"})]})]})}},6823:function(e,t,s){s.d(t,{Z:function(){return ListPosts}});var a=s(2253),n=s(4932),i=s(1309),o=s(5893),l=s(7294),c=s(1664),r=s.n(c);function PostPreview(e){var t=e.attachments;return(0,o.jsx)(o.Fragment,{children:t&&t.length?(0,o.jsxs)("div",{className:"post-video",children:[(0,o.jsxs)("div",{className:"video-thumb",children:[(0,o.jsx)("img",{loading:"lazy",src:"perf"==t[0].type?"img/dalle_thumbnail2.png":"img/article_thumbnail.png",alt:"photo",width:"197",height:"194"}),(0,o.jsx)(r(),{href:t[0].link,className:"play-video",children:(0,o.jsx)("svg",{className:"olymp-play-icon",children:(0,o.jsx)("use",{xlinkHref:"perf"==t[0].type?"#olymp-play-icon":"#olymp-blog-icon"})})})]}),(0,o.jsxs)("div",{className:"video-content",children:[(0,o.jsx)(r(),{className:"h4 title",href:t[0].link,children:t[0].title?t[0].title:"Click to see detail"}),(0,o.jsx)(r(),{className:"link-site",href:"/community",children:"MOSAIC"})]})]}):(0,o.jsx)(o.Fragment,{})})}function CommentSummary(e){var t=e.isLike,s=e.onLike,a=e.onComment,n=e.onShare;return(0,o.jsxs)("div",{className:"post-additional-info inline-items",children:[(0,o.jsx)("a",{className:"post-add-icon inline-items "+(t?"active":""),onClick:s,children:(0,o.jsx)("svg",{className:"olymp-heart-icon",children:(0,o.jsx)("use",{xlinkHref:"#olymp-heart-icon"})})}),(0,o.jsxs)("div",{className:"comments-shared",children:[(0,o.jsx)("a",{className:"post-add-icon inline-items",onClick:a,children:(0,o.jsx)("svg",{className:"olymp-speech-balloon-icon",children:(0,o.jsx)("use",{xlinkHref:"#olymp-speech-balloon-icon"})})}),(0,o.jsx)("a",{className:"post-add-icon inline-items",onClick:n,children:(0,o.jsx)("svg",{className:"olymp-share-icon",children:(0,o.jsx)("use",{xlinkHref:"#olymp-share-icon"})})})]})]})}var d=s(9427),m=s(8345),u=s(7904),h=s(8878);function ListPosts(e){var t=e.userId,s=e.post_type,c=e.shareCallback,p=e.needPostRefresh,f=e.setNeedPostRefresh,x=(0,i._)((0,l.useState)("en"),2),j=x[0],v=x[1],g=(0,i._)((0,l.useState)([]),2),_=g[0],N=g[1],b=(0,i._)((0,l.useState)(-1),2),k=b[0],y=b[1],w=(0,i._)((0,l.useState)(-1),2),P=w[0],C=w[1],S=(0,i._)((0,l.useState)(null),2),F=S[0],R=S[1],Z=(0,i._)((0,l.useState)(!1),2),H=Z[0],z=Z[1],load_posts=function(e){var callback=function(e){N(e),e.length&&y(e[0].pid)};t?(0,h.Pu)(t,e,callback):(0,h.uF)(e,callback)},deletePost=function(e){(0,h.tF)(e,function(e){e.message&&f(!0)})},likeAction=function(e,t,s){e.is_like?(0,h.Pj)(t,s,function(){N(_.map(function(e){return e.pid===s?(0,n._)((0,a._)({},e),{is_like:!1}):e}))}):(0,h.mf)(t,s,function(){N(_.map(function(e){return e.pid===s?(0,n._)((0,a._)({},e),{is_like:!0}):e}))})},openComment=function(e){y(e)},sharePost=function(e){c([(0,u.qn)(e)])};return(0,l.useEffect)(function(){v((0,u.G3)());var e=(0,u.PR)();R(e),("user_post"==s&&t||"community"==s)&&load_posts(e.uid)},[t]),(0,l.useEffect)(function(){p&&(load_posts((0,u.PR)().uid),f(!1))},[p]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{id:"newsfeed-items-grid",children:_.map(function(e){return(0,o.jsxs)("div",{className:"ui-block",children:[(0,o.jsxs)("article",{className:"hentry post video",children:[(0,o.jsxs)("div",{className:"post__author author vcard inline-items",children:[e.avatar?(0,o.jsx)("img",{loading:"lazy",src:e.avatar,alt:"author",width:"42",height:"42"}):(0,o.jsx)("img",{loading:"lazy",src:"img/dalle_avatar.png",alt:"author",width:"42",height:"42"}),(0,o.jsxs)("div",{className:"author-date",children:[(0,o.jsx)(r(),{href:"/profile?uid="+e.user_id,className:"h6 post__author-name fn",children:e.fullname})," ",(0,u.id)(j,"share_a")," ",(0,o.jsx)("a",{children:(0,u.id)(j,"link")}),(0,o.jsx)("div",{className:"post__date",children:(0,o.jsx)("time",{className:"published",dateTime:e.updated_at,children:e.updated_at})})]}),(0,o.jsxs)("div",{className:"more",children:[(0,o.jsx)("svg",{className:"olymp-three-dots-icon",children:(0,o.jsx)("use",{xlinkHref:"#olymp-three-dots-icon"})}),F.uid==e.user_id?(0,o.jsx)("ul",{className:"more-dropdown",children:(0,o.jsx)("li",{children:(0,o.jsxs)("a",{onClick:function(){return deletePost(e.pid)},children:[(0,o.jsx)("i",{className:"fa fa-trash"}),"\xa0",(0,u.id)(j,"delete_post")]})})}):(0,o.jsx)(o.Fragment,{})]})]}),(0,o.jsx)("p",{children:e.content}),(0,o.jsx)(PostPreview,{attachments:e.attachments}),(0,o.jsx)(CommentSummary,{isLike:e.is_like,onLike:function(){likeAction(e,F.uid,e.pid)},onComment:function(){openComment(e.pid)},onShare:function(){sharePost(e.pid)}})]}),e.pid==P?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(m.Z,{pid:e.pid,needCommentRefresh:H,setNeedCommentRefresh:z})}):(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("a",{className:"more-comments",onClick:function(){C(e.pid)},children:(0,u.id)(j,"view_comments")})}),e.pid==k?(0,o.jsx)(d.Z,{user:F,pid:e.pid,onNewComment:function(){z(!0)}}):(0,o.jsx)(o.Fragment,{})]},e.pid)})}),(0,o.jsx)("a",{id:"load-more-button",className:"btn btn-control btn-more","data-load-link":"items-to-load.html","data-container":"newsfeed-items-grid",children:(0,o.jsx)("svg",{className:"olymp-three-dots-icon",children:(0,o.jsx)("use",{xlinkHref:"#olymp-three-dots-icon"})})})]})}},816:function(e,t,s){s.d(t,{Z:function(){return PostPerformance}});var a=s(1309),n=s(5893),i=s(7294),o=s(89),l=s(7904);function PostPerformance(e){var t=e.onNewPost,s=(0,a._)((0,i.useState)("en"),2),c=s[0],r=s[1],d=(0,a._)((0,i.useState)("status"),2),m=d[0],u=d[1];return(0,i.useEffect)(function(){r((0,l.G3)())},[]),(0,n.jsx)("div",{className:"ui-block",children:(0,n.jsxs)("div",{className:"news-feed-form",children:[(0,n.jsx)("ul",{className:"nav nav-tabs",role:"tablist",children:(0,n.jsx)("li",{className:"nav-item",children:(0,n.jsxs)("a",{className:"nav-link inline-items "+("status"==m?"active":""),"data-bs-toggle":"tab",role:"tab",onClick:function(){u("status")},children:[(0,n.jsx)("svg",{className:"olymp-status-icon",children:(0,n.jsx)("use",{xlinkHref:"#olymp-status-icon"})}),(0,n.jsx)("span",{children:(0,l.id)(c,"status")})]})})}),(0,n.jsx)("div",{className:"tab-content",children:(0,n.jsx)("div",{className:"tab-pane fade "+("status"==m?"active show":""),id:"home-1",role:"tabpanel","aria-expanded":"true",children:(0,n.jsx)(o.Z,{callback:function(){alert("Post Success!"),t()}})})})]})})}},4766:function(e,t,s){s.d(t,{Z:function(){return RecentPerformance}});var a=s(1309),n=s(5893),i=s(7294),o=s(1163),l=s(7904),c=s(8878),r=s(1664),d=s.n(r);function RecentPerformance(e){var t=e.title,s=e.userId,r=e.shareCallback,m=(0,o.useRouter)(),u=(0,a._)((0,i.useState)("en"),2),h=u[0],p=u[1],f=(0,a._)((0,i.useState)([]),2),x=f[0],j=f[1],v=(0,a._)((0,i.useState)({}),2),g=v[0],_=v[1],share=function(e){r([(0,l.WY)(e.pid,g.uid)])},annotate=function(e){var t=e.pid,s=g.uid;m.push("/annotation?pid=".concat(t,"&aid=").concat(s))};return(0,i.useEffect)(function(){p((0,l.G3)()),_((0,l.PR)()),(0,c.EZ)(s,10,1,j)},[]),(0,n.jsxs)("div",{className:"ui-block",children:[(0,n.jsxs)("div",{className:"ui-block-title",children:[t?(0,n.jsx)("h6",{className:"title",children:t}):(0,n.jsx)(d(),{className:"h6",href:s?"/performances?uid="+s:"/performances?mode=all",children:s?(0,l.id)(h,"recent_performances"):(0,l.id)(h,"all_recent_performances")}),(0,n.jsx)("a",{className:"more",children:(0,n.jsx)("svg",{className:"olymp-three-dots-icon",children:(0,n.jsx)("use",{xlinkHref:"#olymp-three-dots-icon"})})})]}),(0,n.jsxs)("ul",{className:"widget w-friend-pages-added notification-list friend-requests performance-list",children:[x.map(function(e,t){return(0,n.jsxs)("li",{className:"inline-items",children:[(!s||-1==s)&&(0,n.jsx)("div",{className:"author-thumb",children:(0,n.jsx)(d(),{href:"/profile?uid="+e.user_id,children:e.avatar?(0,n.jsx)("img",{loading:"lazy",src:e.avatar,alt:"photo",width:"36",height:"36"}):(0,n.jsx)("img",{loading:"lazy",src:"img/avatar1.webp",alt:"photo",width:"36",height:"36"})})}),(0,n.jsxs)("div",{className:"notification-event",children:[(0,n.jsx)("a",{className:"h6 notification-friend",onClick:function(){annotate(e)},children:e.name}),(0,n.jsx)("span",{className:"chat-message-item",children:e.updated_at})]}),(0,n.jsx)("span",{className:"notification-icon","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-original-title":"ADD TO YOUR FAVS",children:(0,n.jsx)("button",{className:"btn btn-outline-dark notification-action",onClick:function(){share(e)},children:(0,n.jsx)("i",{className:"fa fa-share"})})})]},e.pid)}),0==x.length?(0,n.jsx)("li",{className:"inline-items",children:(0,l.id)(h,"no_information")}):(0,n.jsx)(n.Fragment,{})]})]})}}}]);